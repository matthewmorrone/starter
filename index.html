<html>
<head>
<meta charset="utf-8">
<icon src='psi.ico'></icon>
<script src="https://cdn.polyfill.io/v1/polyfill.min.js"></script>
<!-- <script src='load.js'></script> -->
<script src="./js/coffeescript.js"></script>
<script src="./js/livescript.js"></script>

<script src="./js/jquery.js"></script>
<script src="./js/jquery.helpers.js"></script>
<!-- <script src="./js/lodash.js"></script>
<script src="./js/backbone.js"></script>
<script src="./js/chroma.js"></script>
<script src="./js/q.js"></script>
<script src="./js/d3.js"></script>
<script src="./js/sigma.js"></script> -->



<script src="./js/markdown.js"></script>
<script src="./js/haml.js"></script>


<script src="./js/esprima.js"></script>
<script src="./js/yaml.js"></script>

<script src="./js/jade.js"></script>

<script src="./js/emblem.js"></script>

<!-- <script src="./js/sass.js"></script> -->
<!-- <script> less = {async: false }; </script> -->
<!-- <script src="./js/less.js"></script> -->
<!-- <script src="./js/stylus.js"></script> -->
<link type="text/css" rel="stylesheet" href="./css/reset.css">
<link type="text/css" rel="stylesheet" href="./css/normal.css">
<link type="text/css" rel="stylesheet" href="./css/bootstrap.css">
<style>
[hide], [from] {
	display: none;
}

</style>
<script>
var log = console.log.bind(console); // function log() {console.log(arguments);};

var yaml = jsyaml;

$(function() {




	// $("coffeescript").each(function() {
	// 	return;
	// 	var $this = $(this);
	// 	var script = $("<script><\/script>", {type: "text\/javascript"}).text(CoffeeScript.compile($this.text()));
	// 	$this.replaceWith(script);
	// });



	// var LiveScript = require("LiveScript");
	// $("livescript").each(function() {
	// 	return;
	// 	var $this = $(this);
	// 	var script = $("<script><\/script>", {type: "text\/livescript"}).text($this.text());
	// 	$this.replaceWith(script);
	// });
	// LiveScript.compile();
	// LiveScript.go();

	// $("sass").each(function() {
	// 	var input = $(this)[0];
	// 	var style = document.createElement("style");
	// 	style.innerHTML = "/* from sass*/\n\n"+Sass.compile(input.innerHTML);
	// 	input.parentNode.replaceChild(style, input);
	// 	log("sass works");
	// });


	// $("stylus").each(function() {
	// 	var input = $(this)[0];
	// 	var rendered = stylus.render(input.innerHTML);
	// 	var style = document.createElement("style");
	// 	style.innerHTML = "/* from stylus*/\n\n"+rendered;
	// 	input.parentNode.replaceChild(style, input);
	// 	log("stylus works");
	// })

	// // try and make this non-async
	// $("less").each(function() {
	// 	var input = $(this)[0];
	// 	less.render(input.innerHTML).then(function(output) {
	// 		var style = document.createElement("style");
	// 		style.innerHTML = "/* from less*/\n\n"+output.css;
	// 		input.parentNode.replaceChild(style, input);
	// 		log("less works");
	// 	});
	// });

	$("markdown").each(function() {
		var text = $(this).text();
		var div = document.createElement("div");
		div.innerHTML = markdown.toHTML(text);
		div.setAttribute("from", "markdown");

		$(this)[0].parentNode.replaceChild(div, $(this)[0]);
		log("markdown works");

	});

	$("haml").each(function() {
		var text = Haml.render($(this).text());
		var div = document.createElement("div");
		div.innerHTML = text;
		div.class = "hide";
		div.setAttribute("from", "haml");
		$(this)[0].parentNode.replaceChild(div, $(this)[0]);
		log("haml works");
	});

	$("yaml").each(function() {
		var text = JSON.stringify(yaml.load($(this).text()));
		var div = document.createElement("div");
		div.innerHTML = text;
		div.setAttribute("from", "yaml");

		$(this)[0].parentNode.replaceChild(div, $(this)[0]);
		log("yaml works");
	});

	$("jade").each(function() {
		var text = jade.render($(this).text());
		var div = document.createElement("div");
		div.innerHTML = text;
		div.setAttribute("from", "jade");

		$(this)[0].parentNode.replaceChild(div, $(this)[0]);
		log("jade works");
	});

	$("style").each(function () {
		var style = $(this);
		var link = $("<link \/>", {
			rel: "stylesheet",
			type: "text\/css"
		});
		var styles = $("<style><\/style>");

		if (style.src() !== "") {
			if (style.text() == "") {
				link.href(style.src());
				// $("head").append(link);
			} else {
				link.attr("href", style.src());
				styles.text(style.text());
				// $("head").append(link);
				// $("head").append(styles);
			}
			// style.remove();

		}
	});

	$("icon").each(function () {
		var icon = $(this);
		var link = $("<link \/>", {
			href: icon.src(),
			rel: "icon",
			type: "image\/png"
		});
		icon.remove();
		$("head").append(link);
	});

	$("fragment[data-src]").each(function () {
		var src = $(this);
		$.post(src.attr("data-src"), function (data) {
			src.html(data);
		});
	});



});



</script>


</head>
<body>





<coffeescript hide>

# Assignment:
number	= 42
opposite = true

# Conditions:
number = -42 if opposite

# Functions:
square = (x) -> x * x

# Arrays:
list = [1, 2, 3, 4, 5]

# Objects:
math =
	root:	Math.sqrt
	square: square
	cube:	(x) -> x * square x

# Splats:
race = (winner, runners...) ->
	print winner, runners

# Existence:
alert "I knew it!" if elvis?

# Array comprehensions:
cubes = (math.cube num for num in list)

console.log "coffeescript works"

</coffeescript>
<livescript hide>


switch 6
case 1		then out = \hello
case 2, 4 then out = \boom
case 6
	out = 'here it is'
default out = \something

console.log "livescript works"

</livescript>
<script type="text/typescript">

class Greeter {
	greeting: string;
	constructor(message: string) {
		this.greeting = message;
	}
	greet() {
		return "Hello, " + this.greeting;
	}
}

var greeter = new Greeter("world");

var button = document.createElement('button');
button.textContent = "Say Hello";
button.onclick = function() {
	alert(greeter.greet());
}

// document.body.appendChild(button);

console.log("typescript works");

</script>
<script src="./js/typescript.js"></script>
<script src="./js/typescript.compile.js"></script>



<sass hide>

$someVar: 123px;
.some-selector
{
	width: $someVar;
}

$foo: 10px;
.selector
{
	margin: $foo;
	.nested
	{
		margin: $foo / 2;
	}
}


</sass>
<less hide>

@color: white;
p {
	color: @color;
}
.class {
	width: (1 + 1);
}
body {
	background-color: @color;
}

</less>
<stylus hide>

body {
	font: 14px/1.5 Helvetica, arial, sans-serif;
	#logo {
		border-radius: 5px;
	}
}


</stylus>
<markdown>

Markdown Works [Cheatsheet][1]


<!-- To see what else you can do with Markdown (including **tables**, **images**, **numbered lists**, and more) take a look at the	-->

<!-- . And then try it out by typing in this box! -->

[1]: https://github.com/adam-p/markdown-here/wiki/Markdown-Here-Cheatsheet




</markdown>

<haml>


%span
	%strong> Haml Works

%a(href="http://haml.info/docs/yardoc/file.REFERENCE.html") Reference
</haml>

<yaml hide>

map:
	# Unordered set of key: value pairs.
	Block style: !!map
		Clark : Evans
		Ingy : döt Net
		Oren : Ben-Kiki
	Flow style: !!map { Clark: Evans, Ingy: döt Net, Oren: Ben-Kiki }


</yaml>

<jade>
title= pageTitle
script(type='text/javascript').
	if (foo) {
		bar(1 + 5)
	}
h1 Jade - node template engine
#container.col
	if youAreUsingJade
		p You are amazing
	else
		p Get on it!
	p.
		Jade is a terse and simple
		templating language with a
		strong focus on performance
		and powerful features.

</jade>
<script type="text/x-emblem" data-template-name="application">
  h1 Welcome to my App
  = outlet
</script>

</body>
</html>
